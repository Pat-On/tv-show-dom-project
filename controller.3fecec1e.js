!function(){function e(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}var n={episodes:[],episode:{},shows:[],show:{},search:{query:"",results:[]},selection:{query:"",selected:{}}},t=function(){var t,r=(t=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.tvmaze.com/shows/82/episodes");case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,console.log(r),n.episodes=r.map((function(e){return e})),console.log(n.episodes),t.ok){e.next=12;break}throw new Error("I'm coming from importAllShows".concat(t.status));case 12:return e.abrupt("return",r);case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var n=this,r=arguments;return new Promise((function(a,o){var i=t.apply(n,r);function c(n){e(i,a,o,c,u,"next",n)}function u(n){e(i,a,o,c,u,"throw",n)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var o=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_data",void 0),a(this,"_parentElement",document.querySelector(".container"))}var n,t,o;return n=e,(t=[{key:"render",value:function(e){this._data=Array.isArray(e)?e:[e],console.log(e);var n=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",n)}},{key:"addHandlerEpisode",value:function(e){window.addEventListener("load",(function(n){n.preventDefault(),e()}))}},{key:"_generateMarkup",value:function(){var e=[];return this._data.forEach((function(n){e.push('\n                        <div class="episode">\n                            <h2>'.concat(n.name," - S").concat(n.season.toString().padStart(2,0),"E").concat(n.number.toString().padStart(2,0),'</h2>\n                            <img src="').concat(n.image.medium,'" alt="">\n                            ').concat(n.summary,"\n                            <a href=").concat(n.url,">Check the source</a>\n                        </div>"))})),e}},{key:"_clear",value:function(){this._parentElement.innerHTML=""}}])&&r(n.prototype,t),o&&r(n,o),e}());function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}//!IMPORTANT HOW TO DO ONE MORE SEARCH ON EMPTY
var u=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_data",void 0),c(this,"_parentElement",document.querySelector(".search"))}var n,t,r;return n=e,(t=[{key:"getQuery",value:function(){return this._parentElement.querySelector(".search__field").value}},{key:"addHandlerSearch",value:function(e){console.log(this._parentElement),this._parentElement.addEventListener("input",(function(n){n.preventDefault(),e()}))}},{key:"_clearInput",value:function(){this._parentElement.querySelector(".search__field").value=""}},{key:"_clear",value:function(){this._parentElement.innerHTML=""}}])&&i(n.prototype,t),r&&i(n,r),e}());function s(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var f=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_searchedNumber",void 0),l(this,"_totalNumber",void 0),l(this,"_data",void 0),l(this,"_parentElement",document.querySelector(".number__of__episodes"))}var n,t,r;return n=e,(t=[{key:"render",value:function(e,n){this._searchedNumber=e,this._totalNumber=n;var t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}},{key:"_generateMarkup",value:function(){return"Displaying ".concat(this._searchedNumber.length,"/").concat(this._totalNumber.length)}},{key:"_clear",value:function(){this._parentElement.innerHTML=""}}])&&s(n.prototype,t),r&&s(n,r),e}());function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var h=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_data",void 0),p(this,"_parentElement",document.querySelector(".select__input"))}var n,t,r;return n=e,(t=[{key:"render",value:function(e){this._data=e;var n=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",n)}},{key:"addHandlerEpisode",value:function(e){this._parentElement.addEventListener("change",(function(n){n.preventDefault(),e()}))}},{key:"getQuery",value:function(){return+this._parentElement.value}},{key:"_generateMarkup",value:function(){var e=['\n        <option value="0" selected> \n          Select all episodes\n      </option> '];return this._data.forEach((function(n){e.push('<option value="'.concat(n.id,'">').concat(n.season.toString().padStart(2,0),"E").concat(n.number.toString().padStart(2,0)," - ").concat(n.name,"</option>"))})),e}},{key:"_clear",value:function(){this._parentElement.innerHTML=""}}])&&d(n.prototype,t),r&&d(n,r),e}());function v(e,n,t,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,a)}o.render(n.episodes);var m=function(){var e,r=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:f.render(n.episodes,n.episodes),o.render(n.episodes),h.render(n.episodes),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){v(o,r,a,i,c,"next",e)}function c(e){v(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),y=function(){var e=h.getQuery();if(0===e)return o.render(n.episodes);console.log(e),function(e){n.selection.selected=e;var t=n.episodes;n.selection.selected=t.find((function(n){return n.id===e}))}(e),console.log(n.selection.selected),o.render(n.selection.selected)},_=function(){var e=u.getQuery();if(""===e)return o.render(n.episodes);console.log(e),e&&(!function(e){n.search.query=e;var t=n.episodes;n.search.results=t.filter((function(n){if(n.summary.toLowerCase().includes(e.toLowerCase())||n.name.toLowerCase().includes(e.toLowerCase()))return n})),console.log(n.search.results)}(e),o.render(n.search.results),f.render(n.search.results,n.episodes),n.search.results=[])};u.addHandlerSearch(_),m(),h.addHandlerEpisode(y)}();
//# sourceMappingURL=controller.3fecec1e.js.map
